---
- name: end-to-end run
  ansible.builtin.shell: |
    set -euxo pipefail
    {
      source {{ role_path }}/files/system.sh \
        {{ node_prefix }} \
        {{ virtual_ip_address }} \
        {{ virtual_network_mask }} \
        {{ virtual_network_interface }}
      initialize_nodes
    } | tee /tmp/superset_cluster_testsuite.log
  args:
    executable: /bin/bash
  async: 1800
  poll: 60
